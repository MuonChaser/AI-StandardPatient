# 前端用户界面

这是AI标准化病人系统的Web前端界面，提供直观的用户交互体验。

## 功能特性

### 🎨 现代化界面
- 响应式设计，支持桌面和移动设备
- 直观的用户界面，易于使用
- 实时状态更新和通知系统

### 💬 聊天功能
- 实时与AI标准化病人对话
- 支持快速问题模板
- 完整的对话历史记录
- 消息时间戳显示

### 🗂️ 会话管理
- 创建和管理多个会话
- 支持预设病例和自定义病例
- 会话状态实时监控
- 一键删除会话

### 📊 信息展示
- 病人基本信息展示
- 会话详细信息查看
- 对话历史回顾
- 连接状态监控

## 快速启动

### 方法一：使用内置服务器（推荐）

```bash
# 进入前端目录
cd frontend

# 启动前端服务器
python server.py

# 或指定端口
python server.py 3000
```

### 方法二：使用任意HTTP服务器

```bash
# 使用Python内置服务器
cd frontend
python -m http.server 3000

# 使用Node.js serve
npx serve . -p 3000

# 使用PHP内置服务器
php -S localhost:3000
```

### 方法三：直接打开HTML文件

如果不需要CORS支持，可以直接在浏览器中打开 `index.html` 文件。

## 使用指南

### 1. 启动服务

1. **启动后端服务**：
   ```bash
   cd /path/to/AI-StandardPatient
   python backend/app.py
   ```

2. **启动前端服务**：
   ```bash
   cd frontend
   python server.py
   ```

3. **访问前端**：
   在浏览器中打开 `http://localhost:3000`

### 2. 创建会话

#### 使用预设病例：
1. 在左侧边栏中输入会话ID
2. 选择"使用预设病例"
3. 从下拉菜单中选择病例
4. 点击"创建会话"

#### 使用自定义病例：
1. 输入会话ID
2. 选择"自定义病例"
3. 在文本框中输入JSON格式的病例数据
4. 点击"创建会话"

#### 自定义病例数据格式：
```json
{
  "basics": {
    "name": "张三",
    "性别": "男",
    "年龄": 30,
    "职业": "教师"
  },
  "disease": "感冒",
  "symptoms": ["头痛", "发热", "咳嗽"],
  "hiddens": [
    {"过敏史": "无明显过敏史"},
    {"家族史": "父亲有高血压"}
  ],
  "personalities": [
    "性格开朗",
    "配合治疗", 
    "有一定医学常识"
  ],
  "examinations": [
    {"体温": "38.5°C"},
    {"血压": "120/80 mmHg"}
  ]
}
```

### 3. 与AI病人对话

1. **选择会话**：点击左侧会话列表中的任意会话
2. **发送消息**：在底部输入框中输入问题，按回车或点击发送
3. **快速问题**：点击预设的快速问题按钮
4. **查看回复**：AI病人的回复会实时显示在聊天区域

### 4. 会话管理

#### 查看会话信息：
- 点击顶部的信息按钮 (ℹ️) 查看详细的病人信息

#### 查看对话历史：
- 点击历史按钮 (🕒) 查看完整的对话记录

#### 删除会话：
- 点击删除按钮 (🗑️) 删除当前会话

## 界面介绍

### 顶部导航栏
- **Logo和标题**：显示系统名称
- **连接状态**：显示与后端服务的连接状态
- **会话计数**：显示当前活跃的会话数量

### 左侧边栏
- **创建会话区域**：用于创建新的会话
- **活跃会话列表**：显示所有当前活跃的会话

### 主聊天区域
- **病人信息头部**：显示当前病人的基本信息和操作按钮
- **消息区域**：显示对话历史
- **输入区域**：消息输入框和快速问题按钮

### 状态指示器

| 颜色 | 状态 | 说明 |
|------|------|------|
| 🟢 绿色 | 已连接 | 后端服务正常运行 |
| 🟡 黄色 | 连接中 | 正在尝试连接后端服务 |
| 🔴 红色 | 连接失败 | 无法连接到后端服务 |

## 快速问题模板

系统提供以下快速问题模板：

1. **基本问诊**："您好，请问您哪里不舒服？"
2. **症状时间**："症状持续多长时间了？"
3. **过敏史**："您有什么过敏史吗？"
4. **家族史**："您的家族病史如何？"

你也可以直接输入自己的问题。

## 技术特性

### 响应式设计
- 支持桌面、平板和手机设备
- 自适应屏幕尺寸
- 触摸友好的界面

### 实时更新
- 自动刷新会话列表（每30秒）
- 实时连接状态监控
- 即时消息通知

### 用户体验
- 平滑的动画效果
- 直观的操作反馈
- 完善的错误处理

## 浏览器兼容性

| 浏览器 | 最低版本 | 支持状态 |
|--------|----------|----------|
| Chrome | 60+ | ✅ 完全支持 |
| Firefox | 55+ | ✅ 完全支持 |
| Safari | 12+ | ✅ 完全支持 |
| Edge | 79+ | ✅ 完全支持 |
| IE | - | ❌ 不支持 |

## 故障排除

### 常见问题

1. **无法连接到后端服务**
   - 确保后端服务正在运行（端口8080）
   - 检查防火墙设置
   - 确认API地址配置正确

2. **页面无法加载**
   - 检查前端服务器是否正常启动
   - 确认端口没有被占用
   - 尝试刷新浏览器

3. **创建会话失败**
   - 检查会话ID是否唯一
   - 验证自定义数据的JSON格式
   - 确认选择了有效的预设病例

4. **消息发送失败**
   - 检查网络连接
   - 确认后端服务正常
   - 尝试重新创建会话

### 开发者工具

按 F12 打开浏览器开发者工具：
- **Console标签**：查看JavaScript错误日志
- **Network标签**：检查API请求状态
- **Application/Storage标签**：查看本地存储

### 配置修改

如果需要修改API地址，编辑 `app.js` 文件中的 `API_BASE_URL` 常量：

```javascript
const API_BASE_URL = 'http://your-backend-url:port/api';
```

## 更新日志

### v1.0.0
- 初始版本发布
- 基本聊天功能
- 会话管理
- 响应式设计

## 贡献指南

欢迎提交Issue和Pull Request来改进前端界面！

### 开发环境设置
1. 克隆项目到本地
2. 启动后端服务
3. 启动前端服务
4. 开始开发和测试

### 代码规范
- 使用现代JavaScript (ES6+)
- 遵循语义化HTML结构
- 使用CSS变量管理样式
- 保持代码注释完整

## 许可证

本项目基于MIT许可证开源。
